<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ëŠ”ì•¼ ì¸ê°„ í™•ë¥  ê³„ì‚°ê¸°</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts (Jua for cute, kid-friendly look) -->
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <!-- Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <style>
        body {
            font-family: 'Jua', sans-serif;
            background-color: #F0F9FF;
            background-image: radial-gradient(#bae6fd 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .slide-up {
            animation: slideUp 0.5s ease-out forwards;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .bar-fill {
            transition: width 1.5s cubic-bezier(0.22, 1, 0.36, 1);
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <!-- Main Game Container -->
    <div class="bg-white max-w-lg w-full rounded-3xl shadow-2xl overflow-hidden border-4 border-blue-200 relative">
        
        <!-- Header -->
        <div class="bg-blue-400 p-4 text-center">
            <h1 class="text-2xl text-white drop-shadow-md flex items-center justify-center gap-2">
                <i class="ph-fill ph-robot text-3xl"></i>
                ë‚˜ëŠ”ì•¼ ì¸ê°„ í™•ë¥  ê³„ì‚°ê¸°
            </h1>
        </div>

        <!-- Content Area -->
        <div id="game-content" class="p-6 min-h-[450px] flex flex-col justify-center">
            
            <!-- Scene: Intro -->
            <div id="scene-intro" class="text-center space-y-6 slide-up">
                <div class="bg-blue-50 p-6 rounded-full w-40 h-40 mx-auto flex items-center justify-center border-4 border-blue-100">
                    <i class="ph-duotone ph-brain text-6xl text-blue-500"></i>
                </div>
                <div>
                    <h2 class="text-2xl text-gray-800 mb-2">ì•ˆë…•! ë‚˜ëŠ” AI ë¡œë´‡ì´ì•¼.</h2>
                    <p class="text-gray-600 text-lg leading-relaxed">
                        ë‚˜ëŠ” ìˆ˜ë°±ë§Œ ê¶Œì˜ ì±…ì„ ì½ì–´ì„œ<br>
                        ì‚¬ëŒë“¤ì´ ìì£¼ ì“°ëŠ” ë§ë²„ë¦‡ì„ ì•Œê³  ìˆì–´.<br>
                        ë‚˜ë‘ ê°™ì´ <strong>'ë‹¤ìŒì— ì˜¬ ë‹¨ì–´'</strong>ë¥¼ ë§í˜€ë³¼ë˜?<br>
                        <span class="text-sm text-blue-500 mt-2 block">(ì´ 5ë¬¸ì œë¥¼ í’€ì–´ë³´ì!)</span>
                    </p>
                </div>
                <button onclick="startGame()" class="bg-blue-500 hover:bg-blue-600 text-white text-xl py-3 px-8 rounded-2xl transition transform hover:scale-105 shadow-lg w-full">
                    ì¢‹ì•„, ì‹œì‘í•˜ì! ğŸš€
                </button>
            </div>

            <!-- Scene: Question (Dynamic Content) -->
            <div id="scene-question" class="hidden space-y-6 slide-up">
                <div class="flex justify-between items-center text-gray-400 text-sm font-bold">
                    <span>ë¬¸ì œ <span id="q-current">1</span> / <span id="q-total">5</span></span>
                    <span id="score-display" class="bg-yellow-100 text-yellow-600 px-2 py-1 rounded-lg">ì ìˆ˜: 0</span>
                </div>

                <div class="bg-yellow-100 p-6 rounded-xl border-2 border-yellow-300 text-center relative shadow-sm">
                    <p id="q-text" class="text-2xl text-gray-800 mt-2 leading-relaxed">
                        <!-- Question Text Goes Here -->
                    </p>
                </div>
                
                <p class="text-center text-gray-500">ê°€ì¥ ë§ì€ ì‚¬ëŒë“¤ì´ ì“¸ë²•í•œ ë§ì€?</p>
                
                <div id="options-container" class="grid grid-cols-1 gap-3">
                    <!-- Options Buttons will be injected here -->
                </div>
            </div>

            <!-- Scene: Result (Dynamic Content) -->
            <div id="scene-result" class="hidden space-y-5 slide-up">
                <div class="text-center">
                    <h3 id="result-title" class="text-xl font-bold mb-1">AIì˜ ë¶„ì„ ê²°ê³¼! ğŸ§ </h3>
                    <p id="result-subtitle" class="text-gray-500 text-sm">ê°€ì¥ ë†’ì€ í™•ë¥ ì€ ë¬´ì—‡ì¼ê¹Œìš”?</p>
                </div>

                <div id="bars-container" class="space-y-3 bg-gray-50 p-4 rounded-xl border border-gray-200">
                    <!-- Bars will be injected here -->
                </div>

                <div class="bg-blue-100 p-4 rounded-lg text-blue-800 text-sm leading-relaxed flex gap-3 items-start">
                    <i class="ph-fill ph-lightbulb text-2xl text-yellow-500 flex-shrink-0"></i>
                    <span id="explanation-text">
                        <!-- Explanation goes here -->
                    </span>
                </div>

                <button onclick="nextQuestion()" class="w-full bg-green-500 hover:bg-green-600 text-white py-3 rounded-xl shadow-md transition transform hover:scale-105">
                    ë‹¤ìŒ ë¬¸ì œë¡œ! ğŸ‘‰
                </button>
            </div>

            <!-- Scene: Final Score -->
            <div id="scene-final" class="hidden text-center space-y-6 slide-up">
                <div class="bg-purple-100 p-6 rounded-full w-40 h-40 mx-auto flex items-center justify-center border-4 border-purple-200 animate-bounce">
                    <span id="final-score-icon" class="text-6xl">ğŸ†</span>
                </div>
                <div>
                    <h2 class="text-2xl text-gray-800 mb-2">ëª¨ë“  ë¬¸ì œë¥¼ í’€ì—ˆì–´!</h2>
                    <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 text-center space-y-2">
                        <p class="text-gray-500">ë‚˜ì˜ AI ì‹±í¬ë¡œìœ¨ ì ìˆ˜ëŠ”?</p>
                        <p class="text-4xl text-blue-600 font-bold my-4">
                            <span id="final-score-val">0</span> / 5
                        </p>
                        <p id="final-message" class="text-gray-700 text-lg">
                            <!-- Final message -->
                        </p>
                    </div>
                </div>
                <button onclick="location.reload()" class="bg-gray-800 hover:bg-black text-white text-xl py-3 px-8 rounded-2xl transition shadow-lg w-full">
                    ì²˜ìŒë¶€í„° ë‹¤ì‹œ í•˜ê¸° ğŸ”„
                </button>
            </div>

        </div>
    </div>

    <script>
        // --- Game Data ---
        const quizData = [
            {
                // Q1: Simple association (Modified as requested)
                textPart1: "ì˜¤ëŠ˜ ì ì‹¬ ê¸‰ì‹ì€ ì •ë§",
                textPart2: "???",
                color: "blue",
                options: [
                    { text: "ë§›ìˆë‹¤", icon: "ğŸ˜‹", percent: 80, isTop: true },
                    { text: "í˜ë“¤ë‹¤", icon: "ğŸ’¦", percent: 10, isTop: false },
                    { text: "ì–´ë µë‹¤", icon: "ğŸ¤”", percent: 5, isTop: false }
                ],
                explanation: "AIëŠ” 'ê¸‰ì‹' ë’¤ì— 'ë§›ìˆë‹¤'ë‚˜ 'ë§›ì—†ë‹¤' ê°™ì€ ë§› í‘œí˜„ì´ ì˜¬ í™•ë¥ ì´ ë†’ë‹¤ê³  ê³„ì‚°í•´ìš”. 'í˜ë“¤ë‹¤'ë‚˜ 'ì–´ë µë‹¤'ëŠ” ê¸‰ì‹ê³¼ ì˜ ì•ˆ ì–´ìš¸ë¦¬ì£ !"
            },
            {
                // Q2: Context (Sad)
                textPart1: "ì² ìˆ˜ëŠ” ì‹œí—˜ì„ ë§ì³¤ë‹¤. ê·¸ë˜ì„œ ê¸°ë¶„ì´ ì •ë§",
                textPart2: "???",
                color: "purple",
                options: [
                    { text: "ìš°ìš¸í•˜ë‹¤", icon: "ğŸ˜¢", percent: 92, isTop: true },
                    { text: "ë°°ê³ í”„ë‹¤", icon: "ğŸ”", percent: 5, isTop: false },
                    { text: "ì‹ ë‚œë‹¤", icon: "ğŸ˜†", percent: 0.1, isTop: false }
                ],
                explanation: "ì•ì— 'ë§ì³¤ë‹¤'ë¼ëŠ” ë§ì´ ìˆì–´ì„œ ìŠ¬í”ˆ ê°ì •ì´ ì˜¬ í™•ë¥ ì´ ì•„ì£¼ ë†’ì•„ìš”. ì´ê²Œ ë°”ë¡œ 'ë¬¸ë§¥'ì„ íŒŒì•…í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤."
            },
            {
                // Q3: Cause and Effect (Weather)
                textPart1: "í•˜ëŠ˜ì— ë¨¹êµ¬ë¦„ì´ ì”ëœ© ê¼ˆì–´. ê³§ ë¹„ê°€",
                textPart2: "???",
                color: "gray",
                options: [
                    { text: "ì˜¬ ê²ƒ ê°™ë‹¤", icon: "â˜”", percent: 85, isTop: true },
                    { text: "ê·¸ì¹  ê±°ì•¼", icon: "â˜€ï¸", percent: 5, isTop: false },
                    { text: "ë§›ìˆì„ ê±°ì•¼", icon: "ğŸ­", percent: 0, isTop: false }
                ],
                explanation: "'ë¨¹êµ¬ë¦„'ì€ 'ë¹„'ì™€ ì§ê¿ ë‹¨ì–´ì˜ˆìš”. AIëŠ” ìˆ˜ë§ì€ ë‚ ì”¨ ì˜ˆë³´ ë°ì´í„°ì—ì„œ ì´ íŒ¨í„´ì„ ë°°ì› ë‹µë‹ˆë‹¤."
            },
            {
                // Q4: Social Context (Birthday)
                textPart1: "ìƒì¼ ì¶•í•˜í•´! ì´ ì„ ë¬¼ì€ ë„ˆë¥¼ ìœ„í•´",
                textPart2: "???",
                color: "pink",
                options: [
                    { text: "ì¤€ë¹„í–ˆì–´", icon: "ğŸ", percent: 90, isTop: true },
                    { text: "ë²„ë ¸ì–´", icon: "ğŸ—‘ï¸", percent: 1, isTop: false },
                    { text: "ìˆ¨ê²¼ì–´", icon: "ğŸ«£", percent: 9, isTop: false }
                ],
                explanation: "ì¶•í•˜í•˜ëŠ” ìƒí™©ì—ì„œëŠ” ê¸ì •ì ì¸ í–‰ë™ì´ ì´ì–´ì§ˆ í™•ë¥ ì´ ë†’ì£ . 'ë²„ë ¸ì–´' ê°™ì€ ë§ì€ ìƒì¼ ìƒí™©ì—ì„œ ê±°ì˜ ì“°ì§€ ì•Šìœ¼ë‹ˆê¹Œìš”."
            },
            {
                // Q5: Idiom/Fixed Phrase
                textPart1: "ì˜›ë‚  ì˜›ì ì— í˜¸ë‘ì´ê°€ ë‹´ë°° í”¼ìš°ë˜",
                textPart2: "???",
                color: "green",
                options: [
                    { text: "ì‹œì ˆì—", icon: "ğŸ¯", percent: 95, isTop: true },
                    { text: "í¸ì˜ì ì—ì„œ", icon: "ğŸª", percent: 0.1, isTop: false },
                    { text: "ë™ë¬¼ì›ì—ì„œ", icon: "ğŸ¦", percent: 2, isTop: false }
                ],
                explanation: "ì´ê±´ í•œêµ­ì–´ì˜ ê´€ìš©êµ¬(ìì£¼ ì“°ëŠ” í‘œí˜„)ì˜ˆìš”. AIëŠ” ì´ëŸ° ì˜›ë‚  ì´ì•¼ê¸° íŒ¨í„´ë„ í†µì§¸ë¡œ ì™¸ìš°ê³  ìˆë‹µë‹ˆë‹¤."
            }
        ];

        // --- Game State ---
        let currentIdx = 0;
        let score = 0;

        // --- Functions ---

        function startGame() {
            currentIdx = 0;
            score = 0;
            document.getElementById('score-display').innerText = `ì ìˆ˜: 0`;
            showScene('scene-question');
            renderQuestion();
        }

        function showScene(sceneId) {
            const scenes = ['scene-intro', 'scene-question', 'scene-result', 'scene-final'];
            scenes.forEach(id => {
                const el = document.getElementById(id);
                el.classList.add('hidden');
                el.classList.remove('slide-up');
            });
            const target = document.getElementById(sceneId);
            target.classList.remove('hidden');
            void target.offsetWidth; // Trigger reflow
            target.classList.add('slide-up');
        }

        function renderQuestion() {
            const data = quizData[currentIdx];
            
            // Update Text
            document.getElementById('q-current').innerText = currentIdx + 1;
            document.getElementById('q-total').innerText = quizData.length;
            
            // Format Question Text with Highlight
            const qHtml = `${data.textPart1} <span class="text-${data.color}-600 border-b-4 border-${data.color}-300 inline-block px-1">${data.textPart2}</span>`;
            document.getElementById('q-text').innerHTML = qHtml;

            // Generate Buttons
            const container = document.getElementById('options-container');
            container.innerHTML = ''; // clear

            data.options.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = `bg-white border-2 border-gray-200 hover:border-${data.color}-400 hover:bg-${data.color}-50 py-4 rounded-xl text-xl text-gray-700 transition flex items-center justify-center gap-2 shadow-sm`;
                btn.innerHTML = `<span>${opt.icon}</span> ${opt.text}`;
                btn.onclick = () => checkAnswer(idx);
                container.appendChild(btn);
            });
        }

        function checkAnswer(selectedIdx) {
            const data = quizData[currentIdx];
            const isCorrect = data.options[selectedIdx].isTop;
            
            if (isCorrect) score++;
            document.getElementById('score-display').innerText = `ì ìˆ˜: ${score}`;

            // Render Result Scene
            showScene('scene-result');
            
            // Set Result Text
            const titleEl = document.getElementById('result-title');
            if (isCorrect) {
                titleEl.innerHTML = "<span class='text-green-500'>ë”©ë™ëŒ•!</span> AIì™€ ìƒê°ì´ í†µí–ˆì–´ìš”!";
            } else {
                titleEl.innerHTML = "<span class='text-orange-500'>ì•„í•˜!</span> AIëŠ” ë‹¤ë¥¸ ìƒê°ì„ í–ˆë„¤ìš”.";
            }

            document.getElementById('explanation-text').innerText = data.explanation;

            // Render Bars
            const barsContainer = document.getElementById('bars-container');
            barsContainer.innerHTML = ''; // clear

            data.options.forEach(opt => {
                const isSelected = (opt === data.options[selectedIdx]);
                const barColor = opt.isTop ? `bg-${data.color}-500` : (isSelected ? 'bg-gray-600' : 'bg-gray-400');
                const textColor = opt.isTop ? `text-${data.color}-600 font-bold` : 'text-gray-500';
                
                const barHtml = `
                    <div>
                        <div class="flex justify-between mb-1">
                            <span class="text-gray-700 ${isSelected ? 'font-bold underline' : ''}">${opt.icon} ${opt.text} ${isSelected ? '(ì„ íƒ)' : ''}</span>
                            <span class="${textColor}">${opt.percent}%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-4">
                            <div class="${barColor} h-4 rounded-full bar-fill" style="width: 0%"></div>
                        </div>
                    </div>
                `;
                barsContainer.insertAdjacentHTML('beforeend', barHtml);
            });

            // Animate Bars
            setTimeout(() => {
                const bars = document.querySelectorAll('.bar-fill');
                bars.forEach((bar, idx) => {
                    bar.style.width = data.options[idx].percent + '%';
                });
            }, 100);
        }

        function nextQuestion() {
            currentIdx++;
            if (currentIdx < quizData.length) {
                showScene('scene-question');
                renderQuestion();
            } else {
                showFinalResult();
            }
        }

        function showFinalResult() {
            showScene('scene-final');
            document.getElementById('final-score-val').innerText = score;
            
            const msgEl = document.getElementById('final-message');
            const iconEl = document.getElementById('final-score-icon');
            
            if (score === 5) {
                iconEl.innerText = "ğŸ‘‘";
                msgEl.innerHTML = "ì™€ìš°! ë‹¹ì‹ ì€ <strong class='text-blue-600'>ì™„ë²½í•œ ì¸ê°„ ì§€ëŠ¥</strong>ì´êµ°ìš”!<br>AIì˜ íŒ¨í„´ì„ ì™„ë²½í•˜ê²Œ íŒŒì•…í–ˆì–´ìš”.";
            } else if (score >= 3) {
                iconEl.innerText = "ğŸ¤–";
                msgEl.innerHTML = "ëŒ€ë‹¨í•´ìš”! AIì˜ ë§ˆìŒì„<br>ê±°ì˜ ë‹¤ ì½ìœ¼ì…¨ë„¤ìš”.";
            } else {
                iconEl.innerText = "ğŸ¨";
                msgEl.innerHTML = "ë‹¹ì‹ ì€ ë»”í•œ ì •ë‹µë³´ë‹¤<br><strong>ì°½ì˜ì ì¸ ìƒê°</strong>ì„ í•˜ëŠ” ì‚¬ëŒì´êµ°ìš”!<br>(AIëŠ” ì°½ì˜ì„±ì„ ì–´ë ¤ì›Œí•´ìš”)";
            }
        }

        // Start animation on load
        window.onload = () => {
             document.getElementById('scene-intro').classList.add('slide-up');
        };

    </script>
</body>
</html>
